<div class="form-container">
  <div class="form-card">
    <div class="card-header">
      <h2 class="title">Créer une offre</h2>
      <p class="subtitle">Ajouter une nouvelle offre</p>
    </div>

    <form #offreForm="ngForm" (ngSubmit)="submit()" class="establishment-form">
      <div class="form-section">
        <div class="form-group">
          <label for="titre" class="form-label">Titre *</label>
          <input type="text" id="titre" class="form-input" [(ngModel)]="titre" name="titre"
                 placeholder="Entrez le titre de l'offre" required />
        </div>

        <div class="form-group">
          <label for="description" class="form-label">Description</label>
          <textarea id="description" class="form-input" [(ngModel)]="description" name="description"
                    placeholder="Entrez une description"></textarea>
        </div>

        <div class="form-group-inline">
          <div class="form-group">
            <label for="dateDebut" class="form-label">Date début *</label>
            <input type="date" id="dateDebut" class="form-input" [(ngModel)]="dateDebut" name="dateDebut" required />
          </div>

          <div class="form-group">
            <label for="dateFin" class="form-label">Date fin *</label>
            <input type="date" id="dateFin" class="form-input" [(ngModel)]="dateFin" name="dateFin" required />
          </div>
        </div>

        <div class="form-group">
          <label for="etablissementId" class="form-label">Établissement *</label>
          <select id="etablissementId" class="form-input" [(ngModel)]="etablissementId" name="etablissementId" required>
            <option [ngValue]="null">-- Choisir --</option>
            <option *ngFor="let e of etablissements" [ngValue]="e.id">
              {{ e.nom }} ({{ e.pays }})
            </option>
          </select>
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="reset()" [disabled]="loading">
          <svg class="btn-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
            <path d="M3 3v5h5"/>
          </svg>
          Réinitialiser
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="loading || !offreForm.valid">
          <ng-container *ngIf="!loading; else loadingTpl">
            <svg class="btn-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 5v14"/>
              <path d="M5 12h14"/>
            </svg>
            Créer
          </ng-container>
          <ng-template #loadingTpl>
            <div class="loading-spinner"></div>
            Création...
          </ng-template>
        </button>
      </div>

      <div *ngIf="message" class="success-message">
        <svg class="success-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 12l2 2 4-4"/>
          <circle cx="12" cy="12" r="10"/>
        </svg>
        {{ message }}
      </div>
    </form>
  </div>
</div>
