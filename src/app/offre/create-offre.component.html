<mat-card>
  <mat-card-title>Cr√©er une offre</mat-card-title>
  <!-- üëá give the form a template reference -->
  <form #offreForm="ngForm" (ngSubmit)="submit()" style="display:flex; flex-direction:column; gap:12px; margin:12px">

    <mat-form-field appearance="fill">
      <mat-label>Titre</mat-label>
      <input matInput name="titre" [(ngModel)]="titre" required />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Description</mat-label>
      <textarea matInput name="description" [(ngModel)]="description"></textarea>
    </mat-form-field>

    <div style="display:flex; gap:8px">
      <mat-form-field appearance="fill" style="flex:1">
        <mat-label>Date d√©but</mat-label>
        <input matInput type="date" name="dateDebut" [(ngModel)]="dateDebut" required />
      </mat-form-field>
      <mat-form-field appearance="fill" style="flex:1">
        <mat-label>Date fin</mat-label>
        <input matInput type="date" name="dateFin" [(ngModel)]="dateFin" required />
      </mat-form-field>
    </div>

    <mat-form-field appearance="fill">
      <mat-label>Etablissement</mat-label>
      <mat-select name="etablissementId" [(ngModel)]="etablissementId" required>
        <mat-option [value]="null">-- Choisir --</mat-option>
        <mat-option *ngFor="let e of etablissements" [value]="e.id">
          {{e.nom}} ({{e.pays}})
        </mat-option>
      </mat-select>
    </mat-form-field>

    <div style="display:flex; gap:8px; margin-top:8px">
      <button mat-flat-button color="primary" type="submit" [disabled]="loading">
        <ng-container *ngIf="!loading; else loadingTpl">Cr√©er</ng-container>
        <ng-template #loadingTpl>
          <mat-spinner diameter="20"></mat-spinner>
        </ng-template>
      </button>
    </div>

    <p *ngIf="message">{{message}}</p>
  </form>
</mat-card>
