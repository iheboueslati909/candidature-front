<div class="app-wrapper" *ngIf="showSidenav; else fullContent">
  <aside class="sidebar">
    <div class="sidebar-header"></div>
    <nav class="sidebar-nav">
      <ng-container *ngFor="let item of menuItems">
        <!-- Normal items -->
        <a class="nav-item"
           *ngIf="canView(item) && item.route !== '/notification/list'"
           [routerLink]="item.route"
           routerLinkActive="active">
          <div class="icon-wrapper">
            <mat-icon>{{ item.icon }}</mat-icon>
          </div>
          <span class="label">{{ item.label }}</span>
        </a>

        <!-- Notifications (opens dialog instead of routing) -->
        <a class="nav-item"
           *ngIf="canView(item) && item.route === '/notification/list'"
           (click)="openNotifications()">
          <div class="icon-wrapper">
            <mat-icon>{{ item.icon }}</mat-icon>
          </div>
          <span class="label">{{ item.label }}</span>
          <mat-icon *ngIf="hasNotifications"
                    color="warn"
                    class="notification-dot">
            fiber_manual_record
          </mat-icon>
        </a>
      </ng-container>
    </nav>
  </aside>

  <main class="main-content-area">
    <header class="top-header">
      <div class="header-left">
        <span class="page-title">Plateforme de mobilit√©</span>
      </div>
      <div class="header-right">
        <button class="icon-button" aria-label="Account">
          <mat-icon>account_circle</mat-icon>
        </button>
      </div>
    </header>

    <div>
      <router-outlet></router-outlet>
    </div>
  </main>
</div>

<!-- reference NotificationListComponent so standalone import is recognized by the compiler -->
<ng-container *ngIf="false">
  <app-notification-list></app-notification-list>
</ng-container>

<ng-template #fullContent>
  <router-outlet></router-outlet>
</ng-template>
